## Modified PKCE Command Line Tool to Automate Login

This tool demonstrates an Automated Authorization Code Flow with PKCE and Authn



## Usage

```
Edit run.sh
Add
 --client_id
 --okta_org
 --user
 --user
```

## Run

```
npm install
./run.sh
```

You'll get output like this:

```
Created Code Verifier (v): bc7b_fb3a_5576_3569_5b28_3876_4974_3bfe_9793_383d_00b3

Created Code Challenge ($): 6hxXJb5aXMH1Kt7BMsOkOLwqhD5CW0rQJ3IENyrDj6c

Running...
session: 20111jgOZ0pNkOoQTAl70UDI_2_8R9U90f5LnEwQXxuACwxvkQDZ__7

Got code (α): ehCJgNuhboqLspMPpDFT0QQeEx4FrziFp-pMHbeBMEY


Calling /token endpoint with:
client_id: 0oa1ddcipQGRBMQ815d6
code_verifier (v): bc7b_fb3a_5576_3569_5b28_3876_4974_3bfe_9793_383d_00b3
code (α): ehCJgNuhboqLspMPpDFT0QQeEx4FrziFp-pMHbeBMEY

Here is the complete form post that will be sent to the /token endpoint:
{
  grant_type: 'authorization_code',
  redirect_uri: 'http://localhost:8080/redirect',
  client_id: '0oa1ddcipQGRBMQ815d6',
  code: 'ehCJgNuhboqLspMPpDFT0QQeEx4FrziFp-pMHbeBMEY',
  code_verifier: 'bc7b_fb3a_5576_3569_5b28_3876_4974_3bfe_9793_383d_00b3'
}


Got token response:
{
  token_type: 'Bearer',
  expires_in: 3600,
  access_token: 'eyJraWQiOiIwNE45M2l0WnpjMERhNHh1NlNuM3k4WEJGS19CVkVSTk9zaU1ucFdqRHpBIiwiYWxnIjoiUlMyNTYifQ.eyJ2ZXIiOjEsImp0aSI6IkFULmExMEZFM19ZbGF2OS1xUFc1WlBZbkY5dm1qQmU4SDFPRlo1RDJ3Ylh0WTgiLCJpc3MiOiJodHRwczovL2VyaWttYW5vci5va3RhLmNvbSIsImF1ZCI6Imh0dHBzOi8vZXJpa21hbm9yLm9rdGEuY29tIiwic3ViIjoidGVzdC51c2VyQG1haWwuY29tIiwiaWF0IjoxNjE4NDEzNTYxLCJleHAiOjE2MTg0MTcxNjEsImNpZCI6IjBvYTFkZGNpcFFHUkJNUTgxNWQ2IiwidWlkIjoiMDB1azdlM3ZySjExRUZrTk41ZDYiLCJzY3AiOlsib3BlbmlkIiwicHJvZmlsZSIsImVtYWlsIl19.XDcoHnYdAZXxJI9uLeMFuzL6nWP6mqllkhrGoi0hsET9eAPJGrLXEBBugF3LmSMmMpp7HzQGrrtM9lcbo794bZQDrEkaxHxidmWHJSMDDdZt901ie4TGvn-RyE_94Bt_PqQq0c33mcuIkh2fz-6gYE_TcgG6EFsv5pdjdIPIx8FFe577-I1C4nkVuedW_OkKC4eBosU4BJ4f5m6tOlNMUkl3aPfaL9nLRXpjag1BkZGSHO_HroQVNvvIiZZDXOB_-HU1SO03qJdBt5S4LQboH_NMqO2YzjP8sEIOqc8j5FLkW26F4XlVvTQvfPSJIw7BcNZ9DIjyCrr6bJD4dP1Wig',
  scope: 'openid profile email',
  id_token: 'eyJraWQiOiJMc1p2aFV2SEVkTlJTYzM5RVREOTItZWFLRFQwYjZ6bnZkVDhKU1VvN2VzIiwiYWxnIjoiUlMyNTYifQ.eyJzdWIiOiIwMHVrN2UzdnJKMTFFRmtOTjVkNiIsIm5hbWUiOiJ0ZXN0IHVzZXIiLCJlbWFpbCI6InRlc3QudXNlckBtYWlsLmNvbSIsInZlciI6MSwiaXNzIjoiaHR0cHM6Ly9lcmlrbWFub3Iub2t0YS5jb20iLCJhdWQiOiIwb2ExZGRjaXBRR1JCTVE4MTVkNiIsImlhdCI6MTYxODQxMzU2MSwiZXhwIjoxNjE4NDE3MTYxLCJqdGkiOiJJRC5KNnRhQWd2X3NtaktGMnpVQ2VNSHdnakVmUG14eS1pdm9kSy1CY2d4clpVIiwiYW1yIjpbInB3ZCJdLCJpZHAiOiIwMG9wOTBnM01rVjFsNXRSajVkNSIsInByZWZlcnJlZF91c2VybmFtZSI6InRlc3QudXNlckBtYWlsLmNvbSIsImF1dGhfdGltZSI6MTYxODQxMzU2MCwiYXRfaGFzaCI6Imkzb3VWeWlrM0IxeU9yb0hrcTVrZEEifQ.PPEhnnEpHDlwykSPQiMM4e-iglf1kgueqe5VwJsPCUDCZ2QDAUrU35LFzZWf0wA8VMV7cIUtc4io7bdNYWpd32spbttL3dqObvzOB7aT_lWk4CCjYTmzYGbFRz4NPSk5FhwF_8JA8TfDQFyCTq1ytACoUzfV4H5LfEU9vSWuEipSr-F0JQlwirIMGxfG_7zIj9PtvkcOUr8JL7s4mFYnRka7mHOFZg28Ph45h3bfAKd0MTxVuE527zw1s3Vo3JNtNiJDuhzSSDRTOLdNyVMfokUfA1_ExXouxC0LTaz8ZeJx79bFv6-gtoJTRjaZvI1HDDohqU12UUh9iCvWbVhhsA'
}
```


